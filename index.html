<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=1000
  , initial-scale=1.0"
    />
    <title>Grocerise</title>
    <link
      href="https://fonts.googleapis.com/css?family=Crimson+Text|Unica+One"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="index.css" />
  </head>
  <body>
    <div class="container">
      <div class="row">
        <div class="col-md-12 text-center">
          <h3 class="animate-charcter">Grocery Scrape</h3>
        </div>
      </div>
    </div>
    <!-- <svg viewBox="0 0 960 300">
      <symbol id="s-text">
        <text text-anchor="middle" x="50%" y="40%">Scraping</text>
        <text text-anchor="middle" x="50.5%" y="80%">Groceries</text>
      </symbol>

      <g class="g-ants">
        <use xlink:href="#s-text" class="text-copy"></use>
        <use xlink:href="#s-text" class="text-copy"></use>
        <use xlink:href="#s-text" class="text-copy"></use>
        <use xlink:href="#s-text" class="text-copy"></use>
        <use xlink:href="#s-text" class="text-copy"></use>
      </g>
    </svg> -->

    <p class="blocktext">
      Isn`t it crazy how expensive everything is? Wouldn`t it be nice if you
      could figure out the least expensive grocery store for what you want to
      buy NOW? How about how prices have been changing over the last wee while?
      Then my friend, you are in the right place. Lets explore together how much
      your basket of groceries would cost, and save you money
    </p>

    <div class="grid_container">
      <div></div>
      <div class="grid-item" class="superstoreCol">
        <img src="superstore.svg" alt="Superstore" width="75%x" height="75%" />
      </div>
      <div class="grid-item" class="safewayCol">
        <img
          src="Safeway_Inc.-Logo.svg"
          alt="Safeway"
          width="75%"
          height="75%"
        />
      </div>
      <div class="grid-item" class="Walmart">
        <img src="Walmart_logo.svg" alt="Walmart" width="75%" height="75%" />
      </div>
      <div class="grid-item" class="NoFrills">
        <img src="No_Frills_logo.svg" alt="NoFrills" width="75%" height="75%" />
      </div>
      <div class="grid-item" class="milk">
        <img
          src="milk-bottle-svgrepo-com.svg"
          width="75%"
          height="75%"
          alt="Milk"
        />
      </div>
      <div class="grid-item" id="Superstoremilk"></div>
      <div class="grid-item" id="Safewaymilk"></div>
      <div class="grid-item" id="Walmartmilk"></div>
      <div class="grid-item" id="NoFrillsmilk"></div>
      <div class="grid-item" class="Eggs">
        <img src="eggs-svgrepo-com.svg" width="75%" height="75%" alt="Eggs" />
      </div>
      <div class="grid-item" id="Superstoreegg"></div>
      <div class="grid-item" id="Safewayegg"></div>
      <div class="grid-item" id="Walmartegg"></div>
      <div class="grid-item" id="NoFrillsegg"></div>
      <div class="grid-item" class="Rice">
        <img src="rice-svgrepo-com.svg" width="75%" height="75%" alt="Eggs" />
      </div>
      <div class="grid-item" id="Superstorerice"></div>
      <div class="grid-item" id="Safewayrice"></div>
      <div class="grid-item" id="Walmartrice"></div>
      <div class="grid-item" id="NoFrillsrice"></div>
      <div class="grid-item" class="Chicken">
        <img
          src="chicken-2-svgrepo-com.svg"
          width="75%"
          height="75%"
          alt="Eggs"
        />
      </div>
      <div class="grid-item" id="Superstorechicken"></div>
      <div class="grid-item" id="Safewaychicken"></div>
      <div class="grid-item" id="Walmartchicken"></div>
      <div class="grid-item" id="NoFrillschicken"></div>
    </div>

    <hr />

    <script>
      let items = ["milk", "egg", "chicken", "rice"];
      let shops = ["Walmart", "Safeway", "NoFrills", "Superstore"];

      async function fetchPricesJSON(thing, store) {
        const response = await fetch("priceHistory.json");
        const priceArray = await response.json();
        const categoryPrices = priceArray.filter(
          (entry) => entry.item === thing
        );
        console.log(store);
        const categoryPricesStore = categoryPrices.filter(
          (entry) => entry.shop === store
        );
        categoryPricesStore.sort((a, b) => new Date(b.day) - new Date(a.day));
        console.log(categoryPricesStore);
        const newestEntry = categoryPricesStore[0];
        console.log(newestEntry);
        let gridId = newestEntry.shop + newestEntry.item;
        console.log(gridId);
        document.getElementById(gridId).innerHTML = "$" + newestEntry.cost;
      }
      items.forEach((item) => {
        shops.forEach((shop) => {
          fetchPricesJSON(item, shop);
        });
      });
    </script>
  </body>
</html>
